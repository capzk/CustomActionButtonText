# Custom Action Button Text / 自定义动作条按键文本

轻量插件，只改动作条热键**显示文本**，不改游戏按键绑定或数据。配置写入 SavedVariables，重载/重登后保留原样（含注释与格式）。

**插件更新地址：** https://www.curseforge.com/wow/addons/customactionbuttontext

## 新特性 / New Features (v0.1.2+)

### 🎨 简洁编辑器
- **注释着色**：注释行显示为灰色，便于区分配置和说明
- **流畅编辑**：无模式切换，打开即可编辑，无滚动干扰
- **快捷操作**：Ctrl+S 保存，ESC 关闭焦点，Tab 插入空格

### ⚠️ 重要限制
- **3字符限制**：游戏引擎限制热键文本最多3个字符，超过会显示成点
- 建议配置：修饰键使用单字符+连字符（S-, C-, A-），组合键不超过3字符（SMU, CM3）

## 使用方法 / Usage

### 基本操作
- **打开编辑器**：`/cabt`（打开即可编辑，注释显示为灰色）
- **保存配置**：按 `Ctrl+S` 保存（允许格式错误，插件会忽略无效行）
- **关闭焦点**：按 `ESC` 取消输入焦点
- **撤销/重做**：`Ctrl+Z` 撤销，`Ctrl+Y` 重做
- **调试信息**：`/cabt debug` 查看映射数量与原始热键缓存
- **重置配置**：`/cabt reset` 清除本地配置并恢复默认模板

### 编辑器快捷键
- `Ctrl+S` - 保存并应用配置
- `Ctrl+Z` - 撤销
- `Ctrl+Y` - 重做
- `ESC` - 取消输入焦点
- `Tab` - 插入4个空格

## 配置规则 / Configuration Rules

### ✅ 解析规则 / Rules
- 仅解析 `KEY = VALUE` 或空格分隔形式，KEY 会被转为大写
- **不做合法性校验**，任意组合键/特殊键都可配置，是否生效由游戏决定
- **组合键精确匹配优先**（如 `SHIFT-MOUSEWHEELUP = SMU`）
- 若无精确匹配，自动拼接：修饰键映射 + 基础键映射（基础键无映射则使用原始基础键）
- 重复键以最后一条为准
- 未配置的按键使用游戏原生显示

## 文本格式 / Format

- 半角字符，逐行 `KEY = VALUE`（或空格分隔）
- 支持注释（行首或行尾的 `#` / `//` / `--`），空行会被忽略
- 初次打开会显示带注释的默认模板，可直接修改后 `Ctrl+S` 保存
- **重要**：显示文本最多3个字符，超过会显示成点

### 配置示例 / Example

```
# 修饰键（建议单字符+连字符）
SHIFT = S-
CTRL = C-
ALT = A-

# 鼠标键
MOUSEWHEELUP = MU
MOUSEWHEELDOWN = MD
BUTTON3 = M3
BUTTON4 = M4
BUTTON5 = M5

# 其他按键
SPACE = Sp

# 组合键（精确匹配优先）
SHIFT-MOUSEWHEELUP = SMU
SHIFT-MOUSEWHEELDOWN = SMD
CTRL-SPACE = CSp
ALT-MOUSEWHEELUP = AMU
SHIFT-BUTTON4 = SM4
```

## 命令 / Commands

- `/cabt` - 打开编辑器
- `/cabt debug` 或 `/cabt d` - 打印调试信息
- `/cabt reset` 或 `/cabt r` - 清除本地配置并恢复默认模板

## 技术说明 / Technical Notes

- 配置写入 SavedVariables，重载/重登后保留原样（含注释与格式）
- 只改动作条热键显示文本，不改游戏按键绑定或数据
- 不校验组合键合法性，是否生效由游戏处理
- 组合键精确匹配优先，其次自动拼接（基础键无映射则使用原始基础键）
- 保存时仅提示格式问题（如缺少 VALUE），不会阻止保存
- 保存时**原样保存**编辑器内容（含注释与空行），不管是否有错误或空内容
- 插件解析到有效映射才会应用；若无有效映射则忽略，不改变当前生效映射
- 未保存过配置时，编辑器显示默认模板；保存后显示用户本地配置（允许空配置）
- `/cabt reset` 会清除本地配置并恢复默认模板（需再次保存才会写入本地）
- 版本更新后建议运行 `/cabt reset` 清空本地配置避免异常

## 更新日志 / Changelog

### v0.1.2
- 新增：配置编辑器，支持注释着色
- 新增：支持特殊键自定义（方向键、小键盘、导航键等）
- 优化：配置模板结构，配置项前置便于查找
- 优化：所有默认配置优化为3字符以内

### v0.1.0
- 初始版本：基础热键文本自定义功能
